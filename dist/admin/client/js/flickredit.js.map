{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./admin/client/src/js/flickredit.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","$","console","log","jQuery","document","ready","insertAfter","draggable","droppable","drop","event","ui","parentID","target","attr","flickrSet","context","sourceID","fadeOut","remove","receive","entwine","onchange","e","this","flickr_photo_id","val","ajax","url","type","dataType","success","data","found","imageHtml","title","small_url","parent","find","first","html","id","error","jqXHR","textStatus","errorThrown","onclick","flickr_set_id","batchTitle","batchDescription","batchTags","number_of_images_updated","onmouseenter","image","srcImage","width","height","addClass","removeClass","preventDefault","onmouseleave","groupTime","buckets","Array","currentBucket","bucketDelta","bucketsDOM","each","index","Date","parse","push","length","totalImages","append","currentBucketDOM","j","draggedImage","detach","css","button","fpid","flickrPhotoIDS","photoDOM","ajax_bucket_id","replace","join","bucketRow","ajax_bucket_row","element","imageID","effect"],"mappings":"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","file":"/dist/admin/client/js/flickredit.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 17);\n","/*jslint white: true */\nconsole.log('flickr edit');\n\n(function($) {\n\t$(document).ready(function() {\n\n\t\tconsole.log(\"Flickr edit doc ready\");\n\n\t\t$( '<div id=\"previewContainer\"><img id=\"previewImage\"/></div>' ).insertAfter( '#Form_ItemEditForm_FlickrPhotos' );\n\n\t\t$('.flickrSetDraggable').draggable();\n\n\t\t$('.flickrSetFolderDroppable').droppable({\n\t\t\tdrop: function(event, ui) {\n\t\t\t\tvar parentID = $(event.target).attr('data-id');\n\t\t\t\tvar flickrSet = $(ui.draggable.context);\n\t\t\t\tvar sourceID = flickrSet.attr('data-id');\n\t\t\t\tconsole.log(\"update SiteTree set ParentID=\" + parentID + ' where ID=' + sourceID + ';');\n\t\t\t\tconsole.log(\"update SiteTree_Live set ParentID=\" + parentID + ' where ID=' + sourceID + ';');\n\t\t\t\tflickrSet.fadeOut(500, function() {\n\t\t\t\t\t$(flickrSet).remove();\n\t\t\t\t});\n\t\t\t\t/*\n\t\t\t\tconsole.log(event);\n\t\t\t\tconsole.log(ui);\n\n\t\t\t\tvar draggedImage = $(ui.draggable.context);\n\t\t\t\tconsole.log(\"Dragged image:\");\n\t\t\t\tconsole.log(draggedImage);\n\n\t\t\t\tconsole.log(\"Dropped on:\");\n\t\t\t\tconsole.log(event.target);\n\n\t\t\t\tdraggedImage.detach();\n\t\t\t\tdraggedImage.css('left', '0px');\n\t\t\t\tdraggedImage.css('top', '0px');\n\t\t\t\t$(event.target).find('td').first().append(draggedImage);\n\t\t\t\t*/\n\t\t\t},\n\t\t\treceive: function(event, ui) {\n\t\t\t\tconsole.log(\"RECEIVED\");\n\t\t\t}\n\t\t});\n\n\n\t\t/*\n\t\tSearch for image by ID\n\t\t*/\n\t\t$('.imageFlickrID').entwine({\n\t\t\tonchange: function(e) {\n\t\t\t\tconsole.log(\"Value changed\");\n\t\t\t\tconsole.log($(this));\n\t\t\t\tvar flickr_photo_id = $(this).val();\n\t\t\t\tconsole.log(\"FLICKR PHOTO ID T1:\" + flickr_photo_id);\n\n\t\t\t\tif(flickr_photo_id != '') {\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: \"/flickr/ajaxSearchForPhoto/\" + flickr_photo_id,\n\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t//data: '&BatchTitle='+batchTitle+'&BatchDescription='+batchDescription+'&BatchTags='+batchTags,\n\t\t\t\t\t\t//context: document.body,\n\t\t\t\t\t\tsuccess: function(data) {\n\t\t\t\t\t\t\tif (data.found) {\n\t\t\t\t\t\t\t\tvar imageHtml = '<h4>'+data.title+'</h4><img src=\"'+data.small_url+'\"/>';\n\t\t\t\t\t\t\t\t$(e.target).parent().find('.chosenFlickrImage').first().html(imageHtml);\n\t\t\t\t\t\t\t\t$(e.target).parent().find('.flickrPhotoSelectionField').first().val(data.id);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: function(jqXHR, textStatus, errorThrown) {\n\t\t\t\t\t\t\t// log the error to the console\n\t\t\t\t\t\t\tconsole.log(\"The following error occured: \" + textStatus, errorThrown);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(\"Ignoring blank flickr photo id\");\n\t\t\t\t}\n\n\t\t\t}\n\t\t});\n\n\n\t\t$('#batchUpdatePhotographs').entwine({\n\t\t\tonclick: function(e) {\n\t\t\t\tvar flickr_set_id = $('#buckets').attr('data-flickr-set-id');\n\t\t\t\tvar batchTitle = $('input[name=\"BatchTitle\"]').val();\n\t\t\t\tvar batchDescription = $('textarea[name=\"BatchDescription\"]').val();\n\t\t\t\tvar batchTags = $('textarea[name=\"BatchTags\"]').val();\n\t\t\t\tconsole.log(batchTitle);\n\t\t\t\tconsole.log(batchDescription);\n\t\t\t\tconsole.log(batchTags);\n\n\t\t\t\t$('#batchUpdatePhotographs').val('Please wait, updating photographs...');\n\n\t\t\t\t//statusMessage('Batch updating photographs in this set');\n\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: \"/flickr/batchUpdateSet/\" + flickr_set_id,\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tdata: '&BatchTitle=' + batchTitle + '&BatchDescription=' + batchDescription + '&BatchTags=' + batchTags,\n\t\t\t\t\t//context: document.body,\n\t\t\t\t\tsuccess: function(data) {\n\t\t\t\t\t\tconsole.log(data);\n\n\t\t\t\t\t\t$('#batchUpdatePhotographs').val('Batch Update');\n\t\t\t\t\t\tvar numberOfImages = $(data.number_of_images_updated);\n\n\t\t\t\t\t\t//statusMessage('Batch update completed ' + numberOfImages + ' updated');\n\n\n\n\t\t\t\t\t},\n\t\t\t\t\terror: function(jqXHR, textStatus, errorThrown) {\n\t\t\t\t\t\t// log the error to the console\n\t\t\t\t\t\tconsole.log(\"The following error occured: \" + textStatus, errorThrown);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\n\n\t\t$('.flickrThumbnail').entwine({\n\t\t\tonmouseenter: function(e) {\n\t\t\t\tvar image = $('#previewImage');\n\t\t\t\tvar srcImage = $(e.target);\n\n\t\t\t\tconsole.log(image.width(), image.height());\n\t\t\t\timage.attr('src', srcImage.attr('data-flickr-preview-url'));\n\t\t\t\timage.addClass('hoverLarge');\n\t\t\t\timage.width(srcImage.attr('data-flickr-preview-width'));\n\t\t\t\timage.height(srcImage.attr('data-flickr-preview-height'));\n\n\t\t\t\timage.removeClass('horizontal');\n\t\t\t\timage.removeClass('vertical');\n\n\t\t\t\tif (image.width() > image.height()) {\n\t\t\t\t\timage.addClass('horizontal');\n\t\t\t\t} else {\n\t\t\t\t\timage.addClass('vertical');\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tonmouseleave: function(e) {\n\t\t\t\tvar image = $('#previewImage');\n\t\t\t\tvar srcImage = $(e.target);\n\n\t\t\t\timage.attr('src', srcImage.attr('data-flickr-thumbnail-url'));\n\t\t\t\timage.removeClass('hoverLarge');\n\t\t\t\te.preventDefault();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t});\n\n\t\t$('#bucketTimeProgressBar').entwine({\n\t\t\tonchange: function() {\n\t\t\t\tvar groupTime = null;\n\n\t\t\t\tvar buckets = new Array();\n\t\t\t\tvar currentBucket = new Array();\n\t\t\t\tvar bucketDelta = $(this).val() * 1000;\n\t\t\t\t$('#selectedBucketTime').html($(this).val() + 's');\n\t\t\t\tvar bucketsDOM = $('#buckets');\n\t\t\t\tbucketsDOM.html('');\n\n\t\t\t\t$('#hiddenImageStore').find('.bucketPhoto').each(function(index) {\n\t\t\t\t\tvar t = new Date($(this).attr('data-time'));\n\t\t\t\t\t//console.log(\"TIME ATTR:\" + $(this).attr('data-time'));\n\t\t\t\t\t//console.log(t);\n\t\t\t\t\tif(groupTime == null) {\n\t\t\t\t\t\tgroupTime = t;\n\t\t\t\t\t}\n\n\n\t\t\t\t\tvar delta = Date.parse(t) - Date.parse(groupTime);\n\n\t\t\t\t\tif(delta <= bucketDelta) {\n\t\t\t\t\t\tcurrentBucket.push($(this));\n\t\t\t\t\t\t//$(this).detach();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// this bucket is completed\n\t\t\t\t\t\t// save it first\n\t\t\t\t\t\tbuckets.push(currentBucket);\n\t\t\t\t\t\tcurrentBucket = new Array();\n\t\t\t\t\t\tcurrentBucket.push($(this));\n\n\t\t\t\t\t\tgroupTime = t;\n\t\t\t\t\t}\n\n\n\n\t\t\t\t});\n\n\t\t\t\tif(currentBucket.length > 0) {\n\t\t\t\t\tbuckets.push(currentBucket);\n\t\t\t\t}\n\n\n\n\t\t\t\tvar totalImages = 0;\n\n\t\t\t\tfor(var i = 0; i <= buckets.length - 1; i++) {\n\t\t\t\t\t//bucketsDOM.append('WIBBLE');\n\t\t\t\t\tbucketsDOM.append('<tr class=\"bucket ss-gridfield-item  sized' + buckets[i].length + '\" id=\"bucket_' + i + '\"></tr>');\n\t\t\t\t};\n\n\t\t\t\tfor(var i = 0; i <= buckets.length - 1; i++) {\n\t\t\t\t\tvar currentBucketDOM = $('#bucket_' + i);\n\t\t\t\t\ttotalImages = totalImages + buckets[i].length;\n\t\t\t\t\tconsole.log(\"HTML\");\n\n\t\t\t\t\t//currentBucketDOM.append('<td>');\n\t\t\t\t\tvar html = \"<td>\";\n\n\t\t\t\t\tfor(var j = 0; j <= buckets[i].length - 1; j++) {\n\t\t\t\t\t\thtml = html + buckets[i][j].html();\n\t\t\t\t\t};\n\t\t\t\t\thtml = html + '</td><td><span class=\"btn-icon-add btn btn-primary font-icon-folder-add  createBucket\">Create</span></td>';\n\t\t\t\t\tcurrentBucketDOM.append(html);\n\n\t\t\t\t};\n\n\t\t\t\t$('.imgDrag').draggable();\n\n\t\t\t\t$('tr.bucket').droppable({\n\t\t\t\t\tdrop: function(event, ui) {\n\t\t\t\t\t\tconsole.log(\"Dropped\");\n\t\t\t\t\t\tconsole.log(event);\n\t\t\t\t\t\tconsole.log(ui);\n\n\t\t\t\t\t\tvar draggedImage = $(ui.draggable.context);\n\t\t\t\t\t\tconsole.log(\"Dragged image:\");\n\t\t\t\t\t\tconsole.log(draggedImage);\n\n\t\t\t\t\t\tconsole.log(\"Dropped on:\");\n\t\t\t\t\t\tconsole.log(event.target);\n\n\t\t\t\t\t\tdraggedImage.detach();\n\t\t\t\t\t\tdraggedImage.css('left', '0px');\n\t\t\t\t\t\tdraggedImage.css('top', '0px');\n\t\t\t\t\t\t$(event.target).find('td').first().append(draggedImage);\n\t\t\t\t\t},\n\t\t\t\t\treceive: function(event, ui) {\n\t\t\t\t\t\tconsole.log(\"RECEIVED\");\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\tconsole.log('**** TOTAL IMAGES ****:' + totalImages);\n\n\t\t\t}\n\t\t});\n\n\t\t$('.imgDrag').entwine({\n\t\t\tonclick: function() {\n\t\t\t\tconsole.log('bucket img entwine');\n\t\t\t\t$(this).html('test');\n\t\t\t}\n\t\t});\n\n\t\t$('#changeMainPictureButton').entwine({\n\t\t\tonclick: function() {\n\t\t\t\tvar button = $(this);\n\t\t\t\tvar flickr_set_id = button.attr('data-flickr-set-id');\n\t\t\t\tvar fpid = button.attr('data-flickr-photo-id');\n\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: \"/flickr/changeFlickrSetMainImage/\" + flickr_set_id + \"/\" + fpid,\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t//context: document.body,\n\t\t\t\t\tsuccess: function(data) {\n\t\t\t\t\t\t//statusMessage('Main picture successfully updated');\n\t\t\t\t\t},\n\t\t\t\t\terror: function(jqXHR, textStatus, errorThrown) {\n\t\t\t\t\t\t// log the error to the console\n\t\t\t\t\t\tconsole.log(\"The following error occured: \" + textStatus, errorThrown);\n\t\t\t\t\t\t//statusMessage('An error occurred - '+ textStatus);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\n\n\t\t$('.createBucket').entwine({\n\t\t\tonclick: function() {\n\t\t\t\tvar flickrPhotoIDS = new Array();\n\t\t\t\tvar photoDOM = $(this).parent().parent().find('td').first();\n\t\t\t\tvar ajax_bucket_id = $(this).parent().parent().attr('id');\n\t\t\t\tajax_bucket_id = ajax_bucket_id.replace('bucket_', '');\n\t\t\t\tconsole.log('AJAX BUCKET ID:' + ajax_bucket_id);\n\n\t\t\t\t$(photoDOM).find('img').each(function(index) {\n\t\t\t\t\tflickrPhotoIDS.push($(this).attr('data-id'));\n\t\t\t\t});\n\n\t\t\t\tconsole.log(flickrPhotoIDS);\n\n\t\t\t\tvar flickr_set_id = $('#buckets').attr('data-flickr-set-id');\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: \"/flickr/createBucket/\" + flickr_set_id + \"/\" + flickrPhotoIDS.join() + '?bucket_row=' + ajax_bucket_id,\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t//context: document.body,\n\t\t\t\t\tsuccess: function(data) {\n\t\t\t\t\t\tconsole.log(data);\n\n\t\t\t\t\t\tvar bucketRow = $('#bucket_' + data.ajax_bucket_row);\n\t\t\t\t\t\tbucketRow.find('td').first().find('img').each(function(index, element) {\n\t\t\t\t\t\t\tvar imageID = $(this).attr('data-id');\n\t\t\t\t\t\t\timageID = '#flickrPhoto_' + imageID;\n\t\t\t\t\t\t\tconsole.log(\"Removing \" + imageID);\n\t\t\t\t\t\t\t$(imageID).remove();\n\t\t\t\t\t\t});\n\t\t\t\t\t\t//bucketRow.html('Bucket saved');\n\t\t\t\t\t\tbucketRow.effect(\"highlight\", {}, 1000, function() {\n\t\t\t\t\t\t\tbucketRow.addClass('hide');\n\t\t\t\t\t\t});\n\n\n\t\t\t\t\t},\n\t\t\t\t\terror: function(jqXHR, textStatus, errorThrown) {\n\t\t\t\t\t\t// log the error to the console\n\t\t\t\t\t\tconsole.log(\"The following error occured: \" + textStatus, errorThrown);\n\t\t\t\t\t}\n\t\t\t\t})\n\n\n\n\t\t\t\t//console.log(photoDOM);\n\t\t\t}\n\t\t});\n\t});\n})(jQuery);\n"],"sourceRoot":""}