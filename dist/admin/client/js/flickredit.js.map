{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./admin/client/src/js/flickredit.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","$","jQuery","document","ready","insertAfter","draggable","droppable","drop","event","ui","target","attr","flickrSet","context","fadeOut","remove","receive","entwine","onchange","e","flickr_photo_id","this","val","ajax","url","type","dataType","success","data","found","imageHtml","title","small_url","parent","find","first","html","id","error","jqXHR","textStatus","errorThrown","onclick","flickr_set_id","batchTitle","batchDescription","batchTags","number_of_images_updated","onmouseenter","image","srcImage","addClass","width","height","removeClass","preventDefault","onmouseleave","groupTime","buckets","Array","currentBucket","bucketDelta","bucketsDOM","each","index","Date","parse","push","length","append","currentBucketDOM","j","draggedImage","detach","css","flickrPhotoIDS","photoDOM","ajax_bucket_id","replace","join","bucketRow","ajax_bucket_row","element","imageID","effect"],"mappings":"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","file":"/dist/admin/client/js/flickredit.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 17);\n","/*jslint white: true */\nconsole.log('flickr edit');\n\n(function($) {\n\t$(document).ready(function() {\n\n\t\tconsole.log(\"Flickr edit doc ready\");\n\n\t\t$( '<div id=\"previewContainer\"><img id=\"previewImage\"/></div>' ).insertAfter( '#Form_ItemEditForm_FlickrPhotos' );\n\n\t\t$('.flickrSetDraggable').draggable();\n\n\t\t$('.flickrSetFolderDroppable').droppable({\n\t\t\tdrop: function(event, ui) {\n\t\t\t\tvar parentID = $(event.target).attr('data-id');\n\t\t\t\tvar flickrSet = $(ui.draggable.context);\n\t\t\t\tvar sourceID = flickrSet.attr('data-id');\n\t\t\t\tconsole.log(\"update SiteTree set ParentID=\" + parentID + ' where ID=' + sourceID + ';');\n\t\t\t\tconsole.log(\"update SiteTree_Live set ParentID=\" + parentID + ' where ID=' + sourceID + ';');\n\t\t\t\tflickrSet.fadeOut(500, function() {\n\t\t\t\t\t$(flickrSet).remove();\n\t\t\t\t});\n\t\t\t\t/*\n\t\t\t\tconsole.log(event);\n\t\t\t\tconsole.log(ui);\n\n\t\t\t\tvar draggedImage = $(ui.draggable.context);\n\t\t\t\tconsole.log(\"Dragged image:\");\n\t\t\t\tconsole.log(draggedImage);\n\n\t\t\t\tconsole.log(\"Dropped on:\");\n\t\t\t\tconsole.log(event.target);\n\n\t\t\t\tdraggedImage.detach();\n\t\t\t\tdraggedImage.css('left', '0px');\n\t\t\t\tdraggedImage.css('top', '0px');\n\t\t\t\t$(event.target).find('td').first().append(draggedImage);\n\t\t\t\t*/\n\t\t\t},\n\t\t\treceive: function(event, ui) {\n\t\t\t\tconsole.log(\"RECEIVED\");\n\t\t\t}\n\t\t});\n\n\n\t\t/*\n\t\tSearch for image by ID\n\t\t*/\n\t\t$('.imageFlickrID').entwine({\n\t\t\tonchange: function(e) {\n\t\t\t\tconsole.log(\"Value changed\");\n\t\t\t\tconsole.log($(this));\n\t\t\t\tvar flickr_photo_id = $(this).val();\n\t\t\t\tconsole.log(\"FLICKR PHOTO ID T1:\" + flickr_photo_id);\n\n\t\t\t\tif(flickr_photo_id != '') {\n\t\t\t\t\t$.ajax({\n\t\t\t\t\t\turl: \"/flickr/ajaxSearchForPhoto/\" + flickr_photo_id,\n\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\t//data: '&BatchTitle='+batchTitle+'&BatchDescription='+batchDescription+'&BatchTags='+batchTags,\n\t\t\t\t\t\t//context: document.body,\n\t\t\t\t\t\tsuccess: function(data) {\n\t\t\t\t\t\t\tif (data.found) {\n\t\t\t\t\t\t\t\tvar imageHtml = '<h4>'+data.title+'</h4><img src=\"'+data.small_url+'\"/>';\n\t\t\t\t\t\t\t\t$(e.target).parent().find('.chosenFlickrImage').first().html(imageHtml);\n\t\t\t\t\t\t\t\t$(e.target).parent().find('.flickrPhotoSelectionField').first().val(data.id);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\terror: function(jqXHR, textStatus, errorThrown) {\n\t\t\t\t\t\t\t// log the error to the console\n\t\t\t\t\t\t\tconsole.log(\"The following error occured: \" + textStatus, errorThrown);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log(\"Ignoring blank flickr photo id\");\n\t\t\t\t}\n\n\t\t\t}\n\t\t});\n\n\n\t\t$('#batchUpdatePhotographs').entwine({\n\t\t\tonclick: function(e) {\n\t\t\t\tvar flickr_set_id = $('#buckets').attr('data-flickr-set-id');\n\t\t\t\tvar batchTitle = $('input[name=\"BatchTitle\"]').val();\n\t\t\t\tvar batchDescription = $('textarea[name=\"BatchDescription\"]').val();\n\t\t\t\tvar batchTags = $('textarea[name=\"BatchTags\"]').val();\n\t\t\t\tconsole.log(batchTitle);\n\t\t\t\tconsole.log(batchDescription);\n\t\t\t\tconsole.log(batchTags);\n\n\t\t\t\t$('#batchUpdatePhotographs').val('Please wait, updating photographs...');\n\n\t\t\t\t//statusMessage('Batch updating photographs in this set');\n\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: \"/flickr/batchUpdateSet/\" + flickr_set_id,\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\tdata: '&BatchTitle=' + batchTitle + '&BatchDescription=' + batchDescription + '&BatchTags=' + batchTags,\n\t\t\t\t\t//context: document.body,\n\t\t\t\t\tsuccess: function(data) {\n\t\t\t\t\t\tconsole.log(data);\n\n\t\t\t\t\t\t$('#batchUpdatePhotographs').val('Batch Update');\n\t\t\t\t\t\tvar numberOfImages = $(data.number_of_images_updated);\n\n\t\t\t\t\t\t//statusMessage('Batch update completed ' + numberOfImages + ' updated');\n\n\n\n\t\t\t\t\t},\n\t\t\t\t\terror: function(jqXHR, textStatus, errorThrown) {\n\t\t\t\t\t\t// log the error to the console\n\t\t\t\t\t\tconsole.log(\"The following error occured: \" + textStatus, errorThrown);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t});\n\n\n\t\t$('.flickrThumbnail').entwine({\n\t\t\tonmouseenter: function(e) {\n\t\t\t\tvar image = $('#previewImage');\n\t\t\t\tvar srcImage = $(e.target);\n\n\t\t\t\tconsole.log(image.width(), image.height());\n\t\t\t\timage.attr('src', srcImage.attr('data-flickr-preview-url'));\n\t\t\t\timage.addClass('hoverLarge');\n\t\t\t\timage.width(srcImage.attr('data-flickr-preview-width'));\n\t\t\t\timage.height(srcImage.attr('data-flickr-preview-height'));\n\n\t\t\t\timage.removeClass('horizontal');\n\t\t\t\timage.removeClass('vertical');\n\n\t\t\t\tif (image.width() > image.height()) {\n\t\t\t\t\timage.addClass('horizontal');\n\t\t\t\t} else {\n\t\t\t\t\timage.addClass('vertical');\n\t\t\t\t}\n\n\t\t\t\te.preventDefault();\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tonmouseleave: function(e) {\n\t\t\t\tvar image = $('#previewImage');\n\t\t\t\tvar srcImage = $(e.target);\n\n\t\t\t\timage.attr('src', srcImage.attr('data-flickr-thumbnail-url'));\n\t\t\t\timage.removeClass('hoverLarge');\n\t\t\t\te.preventDefault();\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t});\n\n\t\t$('#bucketTimeProgressBar').entwine({\n\t\t\tonchange: function() {\n\t\t\t\tvar groupTime = null;\n\n\t\t\t\tvar buckets = new Array();\n\t\t\t\tvar currentBucket = new Array();\n\t\t\t\tvar bucketDelta = $(this).val() * 1000;\n\t\t\t\t$('#selectedBucketTime').html($(this).val() + 's');\n\t\t\t\tvar bucketsDOM = $('#buckets');\n\t\t\t\tbucketsDOM.html('');\n\n\t\t\t\t$('#hiddenImageStore').find('.bucketPhoto').each(function(index) {\n\t\t\t\t\tvar t = new Date($(this).attr('data-time'));\n\t\t\t\t\t//console.log(\"TIME ATTR:\" + $(this).attr('data-time'));\n\t\t\t\t\t//console.log(t);\n\t\t\t\t\tif(groupTime == null) {\n\t\t\t\t\t\tgroupTime = t;\n\t\t\t\t\t}\n\n\n\t\t\t\t\tvar delta = Date.parse(t) - Date.parse(groupTime);\n\n\t\t\t\t\tif(delta <= bucketDelta) {\n\t\t\t\t\t\tcurrentBucket.push($(this));\n\t\t\t\t\t\t//$(this).detach();\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// this bucket is completed\n\t\t\t\t\t\t// save it first\n\t\t\t\t\t\tbuckets.push(currentBucket);\n\t\t\t\t\t\tcurrentBucket = new Array();\n\t\t\t\t\t\tcurrentBucket.push($(this));\n\n\t\t\t\t\t\tgroupTime = t;\n\t\t\t\t\t}\n\n\n\n\t\t\t\t});\n\n\t\t\t\tif(currentBucket.length > 0) {\n\t\t\t\t\tbuckets.push(currentBucket);\n\t\t\t\t}\n\n\n\n\t\t\t\tvar totalImages = 0;\n\n\t\t\t\tfor(var i = 0; i <= buckets.length - 1; i++) {\n\t\t\t\t\t//bucketsDOM.append('WIBBLE');\n\t\t\t\t\tbucketsDOM.append('<tr class=\"bucket ss-gridfield-item  sized' + buckets[i].length + '\" id=\"bucket_' + i + '\"></tr>');\n\t\t\t\t};\n\n\t\t\t\tfor(var i = 0; i <= buckets.length - 1; i++) {\n\t\t\t\t\tvar currentBucketDOM = $('#bucket_' + i);\n\t\t\t\t\ttotalImages = totalImages + buckets[i].length;\n\t\t\t\t\tconsole.log(\"HTML\");\n\n\t\t\t\t\t//currentBucketDOM.append('<td>');\n\t\t\t\t\tvar html = \"<td>\";\n\n\t\t\t\t\tfor(var j = 0; j <= buckets[i].length - 1; j++) {\n\t\t\t\t\t\thtml = html + buckets[i][j].html();\n\t\t\t\t\t};\n\t\t\t\t\thtml = html + '</td><td><span class=\"btn-icon-add btn btn-primary font-icon-folder-add  createBucket\">Create</span></td>';\n\t\t\t\t\tcurrentBucketDOM.append(html);\n\n\t\t\t\t};\n\n\t\t\t\t$('.imgDrag').draggable();\n\n\t\t\t\t$('tr.bucket').droppable({\n\t\t\t\t\tdrop: function(event, ui) {\n\t\t\t\t\t\tconsole.log(\"Dropped\");\n\t\t\t\t\t\tconsole.log(event);\n\t\t\t\t\t\tconsole.log(ui);\n\n\t\t\t\t\t\tvar draggedImage = $(ui.draggable.context);\n\t\t\t\t\t\tconsole.log(\"Dragged image:\");\n\t\t\t\t\t\tconsole.log(draggedImage);\n\n\t\t\t\t\t\tconsole.log(\"Dropped on:\");\n\t\t\t\t\t\tconsole.log(event.target);\n\n\t\t\t\t\t\tdraggedImage.detach();\n\t\t\t\t\t\tdraggedImage.css('left', '0px');\n\t\t\t\t\t\tdraggedImage.css('top', '0px');\n\t\t\t\t\t\t$(event.target).find('td').first().append(draggedImage);\n\t\t\t\t\t},\n\t\t\t\t\treceive: function(event, ui) {\n\t\t\t\t\t\tconsole.log(\"RECEIVED\");\n\t\t\t\t\t}\n\t\t\t\t})\n\n\t\t\t\tconsole.log('**** TOTAL IMAGES ****:' + totalImages);\n\n\t\t\t}\n\t\t});\n\n\t\t$('.imgDrag').entwine({\n\t\t\tonclick: function() {\n\t\t\t\tconsole.log('bucket img entwine');\n\t\t\t\t$(this).html('test');\n\t\t\t}\n\t\t});\n\n\n\t\t$('.createBucket').entwine({\n\t\t\tonclick: function() {\n\t\t\t\tvar flickrPhotoIDS = new Array();\n\t\t\t\tvar photoDOM = $(this).parent().parent().find('td').first();\n\t\t\t\tvar ajax_bucket_id = $(this).parent().parent().attr('id');\n\t\t\t\tajax_bucket_id = ajax_bucket_id.replace('bucket_', '');\n\t\t\t\tconsole.log('AJAX BUCKET ID:' + ajax_bucket_id);\n\n\t\t\t\t$(photoDOM).find('img').each(function(index) {\n\t\t\t\t\tflickrPhotoIDS.push($(this).attr('data-id'));\n\t\t\t\t});\n\n\t\t\t\tconsole.log(flickrPhotoIDS);\n\n\t\t\t\tvar flickr_set_id = $('#buckets').attr('data-flickr-set-id');\n\t\t\t\t$.ajax({\n\t\t\t\t\turl: \"/flickr/createBucket/\" + flickr_set_id + \"/\" + flickrPhotoIDS.join() + '?bucket_row=' + ajax_bucket_id,\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t//context: document.body,\n\t\t\t\t\tsuccess: function(data) {\n\t\t\t\t\t\tconsole.log(data);\n\n\t\t\t\t\t\tvar bucketRow = $('#bucket_' + data.ajax_bucket_row);\n\t\t\t\t\t\tbucketRow.find('td').first().find('img').each(function(index, element) {\n\t\t\t\t\t\t\tvar imageID = $(this).attr('data-id');\n\t\t\t\t\t\t\timageID = '#flickrPhoto_' + imageID;\n\t\t\t\t\t\t\tconsole.log(\"Removing \" + imageID);\n\t\t\t\t\t\t\t$(imageID).remove();\n\t\t\t\t\t\t});\n\t\t\t\t\t\t//bucketRow.html('Bucket saved');\n\t\t\t\t\t\tbucketRow.effect(\"highlight\", {}, 1000, function() {\n\t\t\t\t\t\t\tbucketRow.addClass('hide');\n\t\t\t\t\t\t});\n\n\n\t\t\t\t\t},\n\t\t\t\t\terror: function(jqXHR, textStatus, errorThrown) {\n\t\t\t\t\t\t// log the error to the console\n\t\t\t\t\t\tconsole.log(\"The following error occured: \" + textStatus, errorThrown);\n\t\t\t\t\t}\n\t\t\t\t})\n\n\n\n\t\t\t\t//console.log(photoDOM);\n\t\t\t}\n\t\t});\n\t});\n})(jQuery);\n"],"sourceRoot":""}